<section class="authPage">
  <div class="authCard">
    <header class="authHeader">
      <h4 class="authTitle">Create merchant</h4>
      <p class="authSubtitle">
        Add a new merchant to the PSP system. Merchant key must be unique.
      </p>
    </header>

    @if (error) {
      <div class="alert">
        {{ error }}
      </div>
    }

    <form [formGroup]="form" (ngSubmit)="submit()" class="authForm">
      <div class="field">
        <label class="label" for="merchantKey">Merchant key</label>
        <input
          id="merchantKey"
          class="input"
          type="text"
          formControlName="merchantKey"
          placeholder="e.g. acme_store_01"
          autocomplete="off"
        />

        @if (form.controls.merchantKey.touched && form.controls.merchantKey.invalid) {
          <p class="errorText">
            @if (form.controls.merchantKey.errors?.['required']) {
              Merchant key is required.
            } @else if (form.controls.merchantKey.errors?.['minlength']) {
              Minimum is 3 characters.
            } @else if (form.controls.merchantKey.errors?.['maxlength']) {
              Maximum is 64 characters.
            } @else if (form.controls.merchantKey.errors?.['pattern']) {
              Allowed: letters, numbers, dot (.), underscore (_) and dash (-).
            } @else {
              Invalid merchant key.
            }
          </p>
        }

        <p class="helpText">
          Tip: use a stable identifier (no spaces). Example: <span class="mono">merchant_123</span>
        </p>
      </div>

      <button class="btnPrimary" type="submit" [disabled]="loading">
        {{ loading ? 'Creating...' : 'Create merchant' }}
      </button>

      <p class="hint">
        <a class="link" routerLink="/merchants">Back to merchants</a>
      </p>
    </form>
  </div>
</section>
